'use strict'; const e = require('../../../../common/vendor.js'); const o = require('../../../../common/assets.js'); const t = require('../../../../api/config/integral.js'); const n = require('../../../../router/index.js'); const r = require('../../../../utils/login/index.js'); const s = require('../../../../store/user/index.js'); require('../../../../store/loading/index.js'), require('../../../../store/login/index.js'), require('../../../../utils/request/index.js'), require('../../../../utils/request/constants.js'), require('../../../../store/setup.js'), require('../../../../utils/common/storage.js'), require('../../../../api/config/login.js')

const i = { __name: 'index', emits: 'update', setup(i, { expose: u, emit: p }) { const { members: a } = s.useUserStore(); const c = e.reactive({ show: !1, type: '', condition: 0, expend: !1, points: '', id: '' }); function d() { c.type = '' } function f() { n.router.pushTab({ path: '/pages/kitchen/index' }), c.type = '' } return u({ open({ points: e, type: o, id: t }) { c.type = Number(o), c.points = e, c.id = t, c.show = !0 } }), (s, i) => e.e({ a: e.unref(c).show && e.unref(c).type === 1 }, e.unref(c).show && e.unref(c).type === 1 ? { b: o._imports_0$3, c: e.o(d), d: e.o((e => (c.type = '', void n.router.push({ path: '/pages/shopping/location/index', query: { id: c.id } })))), e: e.o((o => e.unref(c).show = !1)) } : {}, { f: !e.unref(c).show && e.unref(c).type === 1 }, e.unref(c).show || e.unref(c).type !== 1 ? {} : { g: o._imports_0$3, h: e.o((o => e.unref(c).show = !0)), i: e.t(e.unref(c).points), j: e.o((o => e.unref(c).show = !0)), k: e.o((o => (async function () { await t.buy(c.id).then((async (o) => { e.index.showToast({ icon: 'none', title: '兑换成功' }), c.type = '', setTimeout(() => { n.router.pushTab({ path: 'pages/shopping/index' }) }, 700); const t = await r.getMerbersInfo(); a.current = t })).catch(((e) => { const { message: o } = e == null ? void 0 : e.data; o === '库存不足' && (c.type = '', p('update')), console.log('=====err===', e) })) }()))) }, { l: e.unref(c).type === 0 && e.unref(c).show }, e.unref(c).type === 0 && e.unref(c).show ? { m: o._imports_0$3, n: e.o(d), o: e.o(d), p: e.o(f) } : {}) } }; wx.createComponent(i)
