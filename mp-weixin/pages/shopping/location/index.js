'use strict'; const e = require('../../../common/vendor.js'); const r = require('../../../common/assets.js'); const s = require('../../../store/user/index.js'); const n = require('../../../router/index.js'); const o = require('../../../api/config/integral.js'); const i = require('../../../api/config/address.js'); const d = require('../../../hooks/usePublicPath/index.js'); if (require('../../../store/loading/index.js'), require('../../../store/login/index.js'), require('../../../utils/request/index.js'), require('../../../utils/request/constants.js'), require('../../../store/setup.js'), require('../../../utils/login/index.js'), require('../../../utils/common/storage.js'), require('../../../api/config/login.js'), require('../../../api/config/upload.js'), !Array)
  (e.resolveComponent('shu-nav-bar') + e.resolveComponent('shu-loading'))()

Math || ((() => '../../../components/common/nav-bar/index.js') + (() => '../../../components/common/loading/index.js'))(); const t = { __name: 'index', setup(t) { const { members: u } = s.useUserStore(); const { $publicPath: a } = d.getPublicPath(); e.ref(null); const l = e.reactive({ title: '选择收货地址', id: '', record: {}, address: {}, show: !0, type: '' }); function c() { n.router.pushTab({ path: '/pages/kitchen/index' }), l.type = '' } function p() { l.type = '' } return e.onLoad(((r) => { console.log(r, 'eeeee'), (r == null ? void 0 : r.id) && (l.id = r == null ? void 0 : r.id, (async function (e) { const r = await o.getdetails({ id: e }); console.log(r, 'resresres'), l.record = r }(r == null ? void 0 : r.id))), e.index.$on('select_adress', (e) => { let r, s; l.address = (r = JSON.parse(e)) == null ? void 0 : r.select_adress, l.id = (s = JSON.parse(e)) == null ? void 0 : s.id, console.log(`监听到携带参数为：${e}`) }) })), (s, d) => { let t, f, v, h, g, m, y, q, j; return e.e({ a: e.p({ title: e.unref(l).title }), b: e.unref(a) + e.unref(l).record.icon, c: e.t(e.unref(l).record.name), d: r._imports_0$4, e: e.t(e.unref(l).record.cost), f: (t = e.unref(l).address) == null ? void 0 : t.id }, ((f = e.unref(l).address) == null ? void 0 : f.id) ? { g: e.t(((v = e.unref(l).address) == null ? void 0 : v.province) + ((h = e.unref(l).address) == null ? void 0 : h.city) + ((g = e.unref(l).address) == null ? void 0 : g.country) + ((m = e.unref(l).address) == null ? void 0 : m.detail_info)), h: e.t((y = e.unref(l).address) == null ? void 0 : y.name), i: e.t((q = e.unref(l).address) == null ? void 0 : q.tel), j: r._imports_1$2, k: e.o(((r) => { let s; return (async function (e) { const r = await i.getAdress(e); n.router.push({ path: '/pages/shopping/addAdress/index', query: { shop_id: l.id, info: JSON.stringify(r), type: 'edit' } }) }((s = e.unref(l).address) == null ? void 0 : s.id)) })) } : { l: e.o(((e) => { n.router.push({ path: '/pages/shopping/address/index', query: { id: l.id } }) })) }, { m: ((j = e.unref(l).address) == null ? void 0 : j.id) ? '#A6192E' : '#CBCCCD', n: e.o((e => (function () { const e = u.current.points >= l.record.cost ? 1 : 0; l.type = e, l.show = !0 }()))), o: e.unref(l).type === 0 && !e.unref(l).show }, e.unref(l).type !== 0 || e.unref(l).show ? {} : { p: r._imports_0$3, q: e.o(p), r: e.o(p), s: e.o(c) }, { t: !!e.unref(l).show && e.unref(l).type == 1 }, e.unref(l).show && e.unref(l).type == 1 ? { v: r._imports_0$3, w: e.o((r => e.unref(l).show = !1)), x: e.t(e.unref(l).record.cost), y: e.o((r => e.unref(l).show = !0)), z: e.o((r => (async function () { let r, s, i; const d = { address_id: (r = l.address) == null ? void 0 : r.id, mobile: (s = u == null ? void 0 : u.current) == null ? void 0 : s.mobile, name: (i = l == null ? void 0 : l.record) == null ? void 0 : i.name }; await o.buy(l.id, { ...d }).then((async (r) => { console.log(r, 'resresres'), e.index.showToast({ icon: 'none', title: '兑换成功' }), setTimeout(() => { n.router.pushTab({ path: '/pages/shopping/index' }) }, 700), l.type = '' })) }()))) } : {}) } } }; wx.createPage(t)
