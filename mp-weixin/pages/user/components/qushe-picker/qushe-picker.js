'use strict'; const t = require('../../../../common/vendor.js'); const e = require('./app.js')

let a = {}; let s = {}; let i = {}; let l = {}; const o = t.index.getSystemInfoSync(); const r = o.screenHeight; o.screenWidth; const p = {
  name: 'QSPicker',
  props: { pickerId: { type: String, default: '未定义Id' }, type: { type: String, default: 'date' }, height: { type: Number, default: 0 }, lineHeight: { type: Number, default: 0.09 }, indicator_style: { type: String, default: '' }, fontscale: { type: Number, default: 0.02 }, width: { type: Number, default: 0.8 }, buttonSet: { type: Object, default: () => ({}) }, dataSet: { type: Object, default: () => ({}) }, showReset: { type: Boolean, default: !1 }, title: { type: String, default: '' }, mode: { type: String, default: 'bottom' }, zIndex: { type: [Number, String], default: 9999 }, bgColor_title: { type: String, default: '#F8F8F8' }, autoHide: { type: Boolean, default: !0 }, titleColor: { type: String, default: '#999' }, contentColor: { type: String, default: 'black' } },
  data() { return { showPicker: !1, setObj: {}, years: [], days: 0, value: [], provinceDataList: [], cityDataList: [], areaDataList: [], streetDataList: [], defaultValue: [], wH: r, classObj: { btnSize: `font-size: ${r * (this.fontscale + 0.005)}px;` } } },
  computed: { heightSize() { return this.mode === 'middle' ? `${r * (this.height || 0.3)}px` : `${r * (this.height || 0.45)}px` }, titleSize() { return `${r * (this.fontscale + 0.002)}px` }, contentSize() { return `${r * this.fontscale}px` } },
  watch: { dataSet() { this.init() }, showPicker(t, a) { if (t && this.showReset) { const t = this.defaultValue; switch (this.type) { case 'city':this.cityDataList = s[t[0]], this.areaDataList = i[t[0]][t[1]]; break; case 'provincialStreet':this.cityDataList = s[t[0]], this.areaDataList = i[t[0]][t[1]], this.streetDataList = l[t[0]][t[1]][t[2]]; break; case 'date':const a = e._app.countDays(this.years[t[0]], t); this.days = a.days, this.value = a.val } this.value = [...t] } } },
  created() { this.init() },
  methods: {
    addValue: t => Number(t) < 10 ? `0${t}` : t,
    init() {
      let t; let o; let r; let p; let u = []; let c = {}; let h = []; let d = 0; switch (this.type) {
        case 'date':c = e._app.creatDateObj(this.dataSet), JSON.stringify(c); const n = c.defaultValue; h = e._app.countYears(c.startYear || (new Date()).getFullYear() - 100, c.endYear || (new Date()).getFullYear() + 100); const b = h[h.length - 1]; const f = n.getFullYear(); const m = n.getMonth(); const y = n.getDate(); const _ = n.getHours(); const j = n.getMinutes(); const v = n.getSeconds(); const O = f > b; const g = O ? b : f; const S = O ? 11 : m; n[1] = S, d = e._app.countDays(g, n).days; const k = c.dateMode; if (k >= 1) {
          if (O)
            u.push(h.length - 1); else for (let t = 0; t < h.length; t++)g == h[t] && u.push(t)
        } k >= 2 && u.push(O ? 11 : S), k >= 3 && u.push(O ? d : y - 1), k >= 4 && u.push(_), k >= 5 && u.push(j), k >= 6 && u.push(v), this.years = h, this.days = d, this.setObj = c; break; case 'city':u = this.dataSet.defaultValue || [0, 0, 0], a = require('./city-data/province.js').default, s = require('./city-data/city.js').default, i = require('./city-data/area.js').default, t = a, o = s[u[0]], r = i[u[0]][u[1]], this.provinceDataList = t, this.cityDataList = o, this.areaDataList = r; break; case 'provincialStreet':u = this.dataSet.defaultValue || [0, 0, 0, 0], a = require('./city-data/province.js').default, s = require('./city-data/city.js').default, i = require('./city-data/area.js').default, l = require('./city-data/streets.js').default, t = a, o = s[u[0]], r = i[u[0]][u[1]], p = l[u[0]][u[1]][u[2]], this.provinceDataList = t, this.cityDataList = o, this.areaDataList = r, this.streetDataList = p; break; case 'custom':if (c = e._app.creatCustomObj(this.dataSet), c.defaultValue)
          u = c.defaultValue; else if (c.linkage)
          for (let t = 0; t < c.linkageNum; t++)u.push(0); else c.itemArray.forEach(((t) => { u.push(0) })); this.setObj = c; break; case 'custom2':if (c = e._app.creatCustom2Obj(this.dataSet), c.defaultValue)
          u = c.defaultValue; else if (c.linkage)
          for (let t = 0; t < c.linkageNum; t++)u.push(0); else c.itemArray.forEach(((t) => { u.push(0) })); this.setObj = c
      } const n = [...u]; this.value = u, this.defaultValue = n
    },
    bindChange({ detail: { value: t } }) { let a; switch (this.type) { case 'city':a = t, this.value[0] !== a[0] ? (this.cityDataList = s[a[0]], this.areaDataList = i[a[0]][0], a[1] = 0, a[2] = 0) : this.value[1] !== a[1] && (this.areaDataList = i[a[0]][a[1]], a[2] = 0), this.value = a; break; case 'provincialStreet':a = t, this.value[0] !== a[0] ? (this.cityDataList = s[a[0]], this.areaDataList = i[a[0]][0], this.streetDataList = l[a[0]] && l[a[0]][0] && l[a[0]][0][0] ? l[a[0]][0][0] : [], a[1] = 0, a[2] = 0, a[3] = 0) : this.value[1] !== a[1] ? (this.areaDataList = i[a[0]][a[1]], this.streetDataList = l[a[0]] && l[a[0]][a[1]] && l[a[0]][a[1]][0] ? l[a[0]][a[1]][0] : [], a[2] = 0, a[3] = 0) : this.value[2] !== a[2] && (this.streetDataList = l[a[0]] && l[a[0]][a[1]] && l[a[0]][a[1]][a[2]] ? l[a[0]][a[1]][a[2]] : [], a[3] = 0), this.value = a; break; case 'date':const o = e._app.countDays(this.years[t[0]], t); this.days = o.days, this.value = o.val; break; default:this.value = t } },
    confirm() {
      const t = this.type; const a = this.value; const s = { type: t, value: a, pickerId: this.pickerId }; const i = this.setObj; let l; switch (t) {
        case 'date':l = ''; const t = i.dateFormatArray; JSON.stringify(t); for (let e = 1; e <= this.setObj.dateMode; e++) if (e <= 6) { const s = e - 1; const i = e - 2; switch (e) { case 1:l += this.years[a[s]]; break; case 2:case 3:l += t[i] + (a[s] + 1); break; default:l += t[i] + a[s] } } break; case 'city':l = { label: this._getLabel(), value: this.value, cityCode: this._getCityCode() }; break; case 'provincialStreet':l = { label: this._getprovincialStreetLabel(), value: this.value, cityCode: this._getCityCode() }; break; case 'custom':const s = i.itemArray; l = {}; const o = this.value; const r = i.steps; if (i.linkage) { i.linkageNum === 2 ? (l.steps1 = s[o[0]], l.steps2 = s[o[0]][r.step_2_item][o[1]]) : i.linkageNum === 3 ? (l.steps1 = s[o[0]], l.steps1 || e._app.showToast(`第一列中不存在第${o[0]}项`), l.steps2 = l.steps1[r.step_2_item][o[1]], l.steps2 || e._app.showToast(`第二列中不存在第${o[1]}项`), l.steps3 = l.steps2[r.step_3_item][o[2]], l.steps3 || e._app.showToast(`第三列中不存在第${o[2]}项`)) : e._app.showToast('不在指定范围中') }
        else { l = []; for (let t = 0; t < s.length; t++) { const e = s[t]; l.push(e[o[t]]) } } break; case 'custom2':const p = i.linkage ? i.itemObject : i.itemArray; const u = this.value; if (i.linkage) { l = {}, i.linkageNum === 2 ? (l.steps1 = p.step_1[u[0]], l.steps2 = p.step_2[u[0]][u[1]]) : i.linkageNum === 3 ? (l.steps1 = p.step_1[u[0]], l.steps1 || e._app.showToast(`第一列中不存在第${u[0]}项`), l.steps2 = p.step_2[u[0]][u[1]], l.steps2 || e._app.showToast(`第二列中不存在第${u[1]}项`), l.steps3 = p.step_3[u[0]][u[1]][u[2]], l.steps3 || e._app.showToast(`第三列中不存在第${u[2]}项`)) : e._app.showToast('不在指定范围中') }
        else { l = []; for (let t = 0; t < p.length; t++) { const e = p[t]; l.push(e[u[t]]) } }
      }s.data = l, this.$emit('confirm', s), this.autoHide, this.autoHide && this.hide()
    },
    _getprovincialStreetLabel() { return `${this.provinceDataList[this.value[0]].label}-${this.cityDataList[this.value[1]].label}-${this.areaDataList[this.value[2]].label}${this.streetDataList[this.value[3]] ? `-${this.streetDataList[this.value[3]]}` : ''}` },
    _getLabel() { return `${this.provinceDataList[this.value[0]].label}-${this.cityDataList[this.value[1]].label}-${this.areaDataList[this.value[2]].label}` },
    _getCityCode() { return this.areaDataList[this.value[2]].value },
    show() { this.showPicker = !0, this.$emit('showQSPicker', { pickerId: this.pickerId, type: this.type }) },
    hide() { this.showPicker = !1, this.$emit('hideQSPicker', { pickerId: this.pickerId, type: this.type }) },
    voidFc() {},
  },
}; const u = t._export_sfc(p, [['render', function (e, a, s, i, l, o) { return t.e({ a: t.n(l.showPicker ? 'show' : 'hide'), b: Number(s.zIndex) + 1, c: t.o((t => o.voidFc())), d: t.o((t => o.hide())), e: s.mode === 'bottom' }, s.mode === 'bottom' ? { f: t.t(s.buttonSet.cancleName || '取消'), g: s.buttonSet.cancleColor || '#ADADAD', h: t.o((t => o.hide())), i: t.t(s.title || ''), j: s.titleColor || '#999', k: t.t(s.buttonSet.confirmName || '确定'), l: s.buttonSet.confirmColor || '#3399FF', m: t.o((t => o.confirm())), n: o.titleSize, o: s.bgColor_title || '#f8f8f8' } : s.mode === 'middle' ? t.e({ q: s.title }, s.title ? { r: t.t(s.title || ''), s: o.titleSize, t: s.bgColor_title || '#f8f8f8', v: s.titleColor || '#999' } : {}) : {}, { p: s.mode === 'middle', w: s.type === 'date' }, s.type === 'date' ? t.e({ x: l.setObj.dateMode >= 1 }, l.setObj.dateMode >= 1 ? { y: t.f(l.years, (e, a, s) => ({ a: t.t(e), b: a })) } : {}, { z: l.setObj.dateMode >= 2 }, l.setObj.dateMode >= 2 ? { A: t.f(12, (e, a, s) => ({ a: t.t(e), b: a })) } : {}, { B: l.setObj.dateMode >= 3 }, l.setObj.dateMode >= 3 ? { C: t.f(l.days, (e, a, s) => ({ a: t.t(e), b: a })) } : {}, { D: l.setObj.dateMode >= 4 }, l.setObj.dateMode >= 4 ? { E: t.f(24, (e, a, s) => ({ a: t.t(e), b: a })) } : {}, { F: l.setObj.dateMode >= 5 }, l.setObj.dateMode >= 5 ? { G: t.f(60, (e, a, s) => ({ a: t.t(e), b: a })) } : {}, { H: l.setObj.dateMode >= 6 }, l.setObj.dateMode >= 6 ? { I: t.f(60, (e, a, s) => ({ a: t.t(e), b: a })) } : {}) : s.type === 'city' ? { K: t.f(l.provinceDataList, (e, a, s) => ({ a: t.t(e.label), b: a })), L: t.f(l.cityDataList, (e, a, s) => ({ a: t.t(e.label), b: a })), M: t.f(l.areaDataList, (e, a, s) => ({ a: t.t(e.label), b: a })) } : s.type === 'provincialStreet' ? { O: t.f(l.provinceDataList, (e, a, s) => ({ a: t.t(e.label), b: a })), P: t.f(l.cityDataList, (e, a, s) => ({ a: t.t(e.label), b: a })), Q: t.f(l.areaDataList, (e, a, s) => ({ a: t.t(e.label), b: a })), R: t.f(l.streetDataList, (e, a, s) => ({ a: t.t(e), b: a })) } : {}, { J: s.type === 'city', N: s.type === 'provincialStreet', S: s.type === 'custom' }, s.type === 'custom' ? t.e({ T: l.setObj.linkage }, l.setObj.linkage ? t.e({ U: l.setObj.linkageNum === 2 }, l.setObj.linkageNum === 2 ? { V: t.f(l.setObj.itemArray, (e, a, s) => ({ a: t.t(e[l.setObj.steps.step_1_value]), b: a })), W: t.f(l.setObj.itemArray[l.value[0]][l.setObj.steps.step_2_item], (e, a, s) => ({ a: t.t(e[l.setObj.steps.step_2_value] || e), b: a })) } : l.setObj.linkageNum === 3 ? { Y: t.f(l.setObj.itemArray, (e, a, s) => ({ a: t.t(e[l.setObj.steps.step_1_value]), b: a })), Z: t.f(l.setObj.itemArray[l.value[0]][l.setObj.steps.step_2_item], (e, a, s) => ({ a: t.t(e[l.setObj.steps.step_2_value]), b: a })), aa: t.f(l.setObj.itemArray[l.value[0]][l.setObj.steps.step_2_item][l.value[1]][l.setObj.steps.step_3_item], (e, a, s) => ({ a: t.t(e[l.setObj.steps.step_3_value] || e), b: a })) } : {}, { X: l.setObj.linkageNum === 3 }) : { ab: t.f(l.setObj.itemArray, (e, a, s) => ({ a: t.f(e, (e, a, s) => ({ a: t.t(l.setObj.steps && l.setObj.steps.step_1_value ? e[l.setObj.steps.step_1_value] : e), b: a })), b: a })) }) : {}, { ac: s.type === 'custom2' }, s.type === 'custom2' ? t.e({ ad: l.setObj.linkage }, l.setObj.linkage ? t.e({ ae: l.setObj.linkageNum === 2 }, l.setObj.linkageNum === 2 ? { af: t.f(l.setObj.itemObject.step_1, (e, a, s) => ({ a: t.t(l.setObj.steps.step_1_value ? e[l.setObj.steps.step_1_value] : e), b: a })), ag: t.f(l.setObj.itemObject.step_2[l.value[0]], (e, a, s) => ({ a: t.t(l.setObj.steps.step_2_value ? e[l.setObj.steps.step_2_value] : e), b: a })) } : l.setObj.linkageNum === 3 ? { ai: t.f(l.setObj.itemObject.step_1, (e, a, s) => ({ a: t.t(l.setObj.steps.step_1_value ? e[l.setObj.steps.step_1_value] : e), b: a })), aj: t.f(l.setObj.itemObject.step_2[l.value[0]], (e, a, s) => ({ a: t.t(l.setObj.steps.step_2_value ? e[l.setObj.steps.step_2_value] : e), b: a })), ak: t.f(l.setObj.itemObject.step_3[l.value[0]][l.value[1]], (e, a, s) => ({ a: t.t(l.setObj.steps.step_3_value ? e[l.setObj.steps.step_3_value] : e), b: a })) } : {}, { ah: l.setObj.linkageNum === 3 }) : { al: t.f(l.setObj.itemArray, (e, a, s) => ({ a: t.f(e, (e, a, s) => ({ a: t.t(l.setObj.steps.step_1_value ? e[l.setObj.steps.step_1_value] : e), b: a })), b: a })) }) : {}, { am: `height:${l.wH * (s.lineHeight || 0.09)}px;${s.indicator_style}`, an: o.contentSize, ao: s.contentColor || 'black', ap: l.value, aq: t.o((t => o.bindChange(t))), ar: s.mode === 'top' }, s.mode === 'top' ? { as: t.t(s.buttonSet.cancleName || '取消'), at: s.buttonSet.cancleColor || '#ADADAD', av: t.o((t => o.hide())), aw: t.t(s.title || ''), ax: s.titleColor || '#999', ay: t.t(s.buttonSet.confirmName || '确定'), az: s.buttonSet.confirmColor || '#3399FF', aA: t.o((t => o.confirm())), aB: o.titleSize, aC: s.bgColor_title || '#f8f8f8' } : {}, { aD: t.n(`${s.mode || 'middle'}_view`), aE: o.heightSize, aF: s.mode === 'middle' }, s.mode === 'middle' ? { aG: t.t(s.buttonSet.cancelName || '取消'), aH: s.buttonSet.cancelType || 'default', aI: t.s(l.classObj.btnSize + (s.buttonSet.cancelStyle || '')), aJ: t.o((t => o.hide())), aK: t.t(s.buttonSet.confirmName || '确定'), aL: s.buttonSet.confirmType || 'primary', aM: t.s(l.classObj.btnSize + (s.buttonSet.confirmStyle || '')), aN: t.o((t => o.confirm())) } : {}, { aO: t.n(s.mode || 'middle'), aP: t.n(l.showPicker ? 'show' : 'hide'), aQ: t.s(`z-index:${Number(s.zIndex) + 2};`), aR: t.o((t => o.voidFc())), aS: t.o((t => o.voidFc())), aT: s.zIndex, aU: t.o((t => o.voidFc())), aV: t.o((t => o.voidFc())) }) }], ['__scopeId', 'data-v-28822a7e']]); wx.createComponent(u)
